<!doctype html><html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name=date content="March-29-2022">
<link rel="stylesheet" href="../../style.c0137455c95229bce3c902b60e56fd4abab8e35358e5eb2ab4cc1b7d4a508d8a.css">
<title>Complaints</title>
</head>
<body>
<header>
<h1><a href="../archive">Complaints</a></h1>
</header>
<main>
<div id=content><p>Hey, im back, hope you missed me, this blog is strictly about the English
language now (linguistics and stuff). Maybe I&rsquo;ll start writing about other languages if I
ever decide to learn one (like Hindi or French or something else), so don&rsquo;t hold
me to the English thing for too long.</p>
<p>I&rsquo;ve always had lots of bash aliases, many to just quickly cd to some directory
on my machine (the milliseconds saved in typing really helps, trust me).</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ <span style=font-weight:700;font-style:italic>alias</span> dl dt ws <span style=color:#888;font-style:italic># `alias x ...` shows the alias that&#39;s set for keyword &#34;x&#34;</span>
<span style=font-weight:700;font-style:italic>alias</span> <span style=color:#666;font-weight:700;font-style:italic>dl</span>=<span style=color:#666;font-style:italic>&#39;cd ~/Downloads&#39;</span>
<span style=font-weight:700;font-style:italic>alias</span> <span style=color:#666;font-weight:700;font-style:italic>dt</span>=<span style=color:#666;font-style:italic>&#39;cd ~/Desktop&#39;</span>
<span style=font-weight:700;font-style:italic>alias</span> <span style=color:#666;font-weight:700;font-style:italic>ws</span>=<span style=color:#666;font-style:italic>&#39;cd ~/workspace&#39;</span>
</code></pre></div><p>But today I was going a little too fast (really needed to run my node script)
and I noticed a pretty bad bug.</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ dt nod
-bash: cd: too many arguments
</code></pre></div><p>There&rsquo;s 2 problems here: 1) I didn&rsquo;t press Enter soon enough (should&rsquo;ve pressed
it after I finished typing <code>dt</code>), and 2) I pressed Enter way too soon (should&rsquo;ve
waited until I typed that final <code>e</code> after typing <code>nod</code>). That&rsquo;s not good.</p>
<p>If it&rsquo;s not clear what it&rsquo;s doing: it&rsquo;s passing an argument, <code>"nod"</code>, to
that <code>cd</code> alias, and so it&rsquo;s trying to run:</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ <span style=font-weight:700;font-style:italic>cd</span> ~/Desktop nod
-bash: cd: too many arguments
</code></pre></div><p>which doesn&rsquo;t work because cd only takes 1 directory and isn&rsquo;t smart enough to
just ignore other arguments.</p>
<p>But this is, in fact, the very reason that aliases are thing:</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ <span style=font-weight:700;font-style:italic>alias</span> print-to-stdout=<span style=color:#666;font-style:italic>&#39;echo&#39;</span>
$ print-to-stdout hello!
hello!
</code></pre></div><p>so this isn&rsquo;t actually a bug at all.</p>
<p>I thought I&rsquo;d make a post anyways because why not at this point.</p>
<p>And if I&rsquo;m being honest I can&rsquo;t think of a solution to the problem either, maybe
it just doesn&rsquo;t need one. I&rsquo;ll just have to make sure I&rsquo;m pressing Enter more
often. Or less often? Idk yet.</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>.</p>
<small>
<p>cd <em>will</em> actually ignore those extra arguments by default, but for some
reason my distribution of Bash has the off by default CD_COMPLAINS flag turned
on, so this whole post is even more unnecessary than I had initially intended,
sorry.</p>
<p>(<a href=https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/bash.rb>This is the Homebrew formula</a> for it; none of those patches it&rsquo;s
pulling in are flipping CD_COMPLAINS, so I have no clue where that&rsquo;s happening.)</p>
<p>Edit: oops, I&rsquo;m wrong. It only checks <a href="https://github.com/bminor/bash/blob/f3a35a2d601a55f337f8ca02a541f8c033682247/builtins/cd.def#L332-L338=">if it&rsquo;s defined</a>, <a href=https://github.com/bminor/bash/blob/f3a35a2d601a55f337f8ca02a541f8c033682247/config-top.h>which it is</a> by default.</p>
</small>
</div>
</main>
<footer>
<p class=doc-date>March 29, 2022</p>
</footer>
</body>
</html>
